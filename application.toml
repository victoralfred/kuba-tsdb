# ============================================================================
# Kuba TSDB - Application Configuration
# ============================================================================
#
# Configuration Priority (highest to lowest):
#   1. Environment Variables (KUBA_*)
#   2. This configuration file
#   3. Built-in defaults
#
# Environment variable override format: KUBA_<SECTION>_<KEY>
# Example: KUBA_SERVER_LISTEN_ADDR, KUBA_REDIS_URL
# ============================================================================

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
[server]
# Network binding address
listen_addr = "0.0.0.0:8090"

# Log level: trace, debug, info, warn, error
log_level = "info"

# ----------------------------------------------------------------------------
# Storage Configuration
# ----------------------------------------------------------------------------
[storage]
# Base directory for all data files
data_dir = "/home/voseghale/data/tsdb"

# Maximum chunk size in bytes before rotation (default: 1MB)
# max_chunk_size_bytes = 1048576

# Write buffer configuration for batching points before AHPAC compression
# Higher buffer_max_points values improve compression ratio but increase memory

# Maximum points per active buffer before sealing (default: 1000)
# buffer_max_points = 1000

# Maximum time span in milliseconds before sealing buffer (default: 60000 = 1 min)
# buffer_max_duration_ms = 60000

# Maximum buffer size in bytes before sealing (default: 1MB)
# buffer_max_size_bytes = 1048576

# ----------------------------------------------------------------------------
# Ingestion Configuration
# ----------------------------------------------------------------------------
[ingestion]
# Maximum batch size for single ingest operation (default: 100000)
# max_batch_size = 100000

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
[redis]
# Enable Redis integration for distributed indexing
enabled = true

# Redis connection URL
url = "redis://127.0.0.1:6379"

# Connection pool size (default: 16)
# pool_size = 16

# Connection timeout in seconds (default: 5)
# connection_timeout_secs = 5

# Command timeout in seconds (default: 1)
# command_timeout_secs = 1

# Enable TLS (default: false)
# tls_enabled = false

# ----------------------------------------------------------------------------
# Monitoring Configuration
# ----------------------------------------------------------------------------
[monitoring]
# Enable Prometheus metrics endpoint at /metrics (default: true)
# prometheus_enabled = true

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------
[security]
# CORS allowed origins (empty = allow all for development)
# cors_allowed_origins = []
